!function(a,b){function c(){var b=g.getBoundingClientRect().width;b/j>540&&(b=540*j);var c=b/10;g.style.fontSize=c+"px",l.rem=a.rem=c}function d(a){a.style.fontSize=12*j+"px"}var e,f=a.document,g=f.documentElement,h=f.querySelector('meta[name="viewport"]'),i=f.querySelector('meta[name="flexible"]'),j=0,k=0,l=b.flexible||(b.flexible={});if(h){console.warn("将根据已有的meta标签来设置缩放比例");var m=h.getAttribute("content").match(/initial\-scale=([\d\.]+)/);m&&(k=parseFloat(m[1]),j=parseInt(1/k))}else if(i){var n=i.getAttribute("content");if(n){var o=n.match(/initial\-dpr=([\d\.]+)/),p=n.match(/maximum\-dpr=([\d\.]+)/);o&&(j=parseFloat(o[1]),k=parseFloat((1/j).toFixed(2))),p&&(j=parseFloat(p[1]),k=parseFloat((1/j).toFixed(2)))}}if(!j&&!k){var q=(a.navigator.appVersion.match(/android/gi),a.chrome),r=a.navigator.appVersion.match(/iphone/gi),s=a.devicePixelRatio,t=/TBS\/\d+/.test(a.navigator.userAgent);j=r||q||t?s>=3&&(!j||j>=3)?3:s>=2&&(!j||j>=2)?2:1:1,k=1/j}if(g.setAttribute("data-dpr",j),!h)if(h=f.createElement("meta"),h.setAttribute("name","viewport"),h.setAttribute("content","initial-scale="+k+", maximum-scale="+k+", minimum-scale="+k+", user-scalable=no"),g.firstElementChild)g.firstElementChild.appendChild(h);else{var u=f.createElement("div");u.appendChild(h),f.write(u.innerHTML)}a.addEventListener("resize",function(){clearTimeout(e),e=setTimeout(c,300)},!1),a.addEventListener("pageshow",function(a){a.persisted&&(clearTimeout(e),e=setTimeout(c,300))},!1),f.body?d(f.body):"complete"===f.readyState?d(f.body):f.addEventListener("DOMContentLoaded",function(a){d(f.body)},!1),c(),l.dpr=a.dpr=j,l.refreshRem=c,l.rem2px=function(a){var b=parseFloat(a)*this.rem;return"string"==typeof a&&a.match(/rem$/)&&(b+="px"),b},l.px2rem=function(a){var b=parseFloat(a)/this.rem;return"string"==typeof a&&a.match(/px$/)&&(b+="rem"),b}}(window,window.lib||(window.lib={}));